(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2758:(e,t,a)=>{Promise.resolve().then(a.bind(a,8152))},6868:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,AuthProvider:()=>u});var r=a(5155),s=a(2115),l=a(5725),o=a(6046);let n=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[a,u]=(0,s.useState)(null),i=(0,o.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("token");e&&t&&u(e)},[]);let c=async(e,t)=>{try{let a=await (0,l.Lx)(e,t);console.log("Login response:",a),localStorage.setItem("token",a.message),localStorage.setItem("user",e),u(e),i.push("/profile")}catch(e){alert("Login failed")}},d=async(e,t)=>{try{await (0,l.DY)(e,t),alert("Registration successful! Please login."),i.push("/auth/login")}catch(e){alert("Registration failed")}};return(0,r.jsx)(n.Provider,{value:{user:a,login:c,register:d,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),u(null),i.push("/")}},children:t})}function i(){let e=(0,s.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},8152:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(5155),s=a(2115),l=a(6868);function o(){let[e,t]=(0,s.useState)(""),[a,o]=(0,s.useState)(""),{login:n}=(0,l.A)();return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-6",children:(0,r.jsxs)("div",{className:"w-full max-w-md bg-white shadow-lg rounded-lg p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:"Login"}),(0,r.jsxs)("form",{onSubmit:t=>{t.preventDefault(),n(e,a)},className:"flex flex-col gap-5",children:[(0,r.jsx)("input",{type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none"}),(0,r.jsx)("input",{type:"password",placeholder:"Password",value:a,onChange:e=>o(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none"}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold p-3 rounded-lg transition duration-200",children:"Login"})]}),(0,r.jsxs)("p",{className:"mt-4 text-center text-gray-600",children:["Don't have an account?"," ",(0,r.jsx)("a",{href:"/auth/register",className:"text-blue-500 hover:underline",children:"Register"})]})]})})}},5725:(e,t,a)=>{"use strict";a.d(t,{DY:()=>o,Lx:()=>n,V6:()=>i,oE:()=>u});var r=a(2651);let s="http://localhost:9090/api",l=()=>{let e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}},o=async(e,t)=>(await r.A.post("".concat(s,"/auth/register"),{username:e,password:t})).data,n=async(e,t)=>(await r.A.post("".concat(s,"/auth/login"),{username:e,password:t})).data,u=async()=>(await r.A.get("".concat(s,"/uploads/user-images"),{headers:l()})).data,i=async e=>{let t=new FormData;return t.append("file",e),(await r.A.post("".concat(s,"/uploads/image"),t,{headers:{...l(),"Content-Type":"multipart/form-data"}})).data}}},e=>{var t=t=>e(e.s=t);e.O(0,[238,441,517,358],()=>t(2758)),_N_E=e.O()}]);