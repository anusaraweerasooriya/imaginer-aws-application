(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{3643:(e,t,a)=>{Promise.resolve().then(a.bind(a,1791))},6868:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>i});var r=a(5155),l=a(2115),s=a(5725),o=a(6046);let n=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,l.useState)(null),c=(0,o.useRouter)();(0,l.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("token");e&&t&&i(e)},[]);let d=async(e,t)=>{try{let a=await (0,s.Lx)(e,t);console.log("Login response:",a),localStorage.setItem("token",a.message),localStorage.setItem("user",e),i(e),c.push("/profile")}catch(e){alert("Login failed")}},u=async(e,t)=>{try{await (0,s.DY)(e,t),alert("Registration successful! Please login."),c.push("/auth/login")}catch(e){alert("Registration failed")}};return(0,r.jsx)(n.Provider,{value:{user:a,login:d,register:u,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),i(null),c.push("/")}},children:t})}function c(){let e=(0,l.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},1791:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(5155),l=a(2115),s=a(6868),o=a(5725);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:n="",children:d,iconNode:u,...g}=e;return(0,l.createElement)("svg",{ref:t,...c,width:r,height:r,stroke:a,strokeWidth:o?24*Number(s)/Number(r):s,className:i("lucide",n),...g},[...u.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),u=((e,t)=>{let a=(0,l.forwardRef)((a,r)=>{let{className:s,...o}=a;return(0,l.createElement)(d,{ref:r,iconNode:t,className:i("lucide-".concat(n(e)),s),...o})});return a.displayName="".concat(e),a})("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);function g(e){let{onUploadSuccess:t}=e,[a,s]=(0,l.useState)(null),[n,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(""),g=async()=>{if(!a){d("Please select an image.");return}i(!0),d("");try{let e=await (0,o.V6)(a);d("Image uploaded successfully!"),console.log("Uploaded Image URL:",e),t()}catch(e){d("Upload failed. Please try again.")}finally{i(!1),s(null)}};return(0,r.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg shadow-lg max-w-md mx-auto bg-white",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold mb-4 text-gray-800 flex items-center gap-2",children:[(0,r.jsx)(u,{className:"w-6 h-6 text-blue-500"})," Upload an Image"]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 p-5 rounded-lg bg-gray-50 hover:bg-gray-100 transition",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&s(e.target.files[0])},className:"hidden",id:"file-upload"}),(0,r.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer text-gray-700 hover:text-blue-600 transition",children:a?(0,r.jsx)("span",{className:"text-green-600 font-medium",children:a.name}):"Click to select an image"})]}),(0,r.jsx)("button",{onClick:g,disabled:!a||n,className:"mt-4 w-full px-5 py-2.5 bg-blue-600 text-white text-lg font-medium rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?"Uploading...":"Upload"}),c&&(0,r.jsx)("p",{className:"mt-3 text-center text-sm font-semibold text-gray-700",children:c})]})}function m(){let{user:e}=(0,s.A)(),[t,a]=(0,l.useState)([]);(0,l.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=(await (0,o.oE)()).map(e=>e.imageUrl);a(e)}catch(e){alert("Failed to load user images")}};return(0,r.jsxs)("div",{className:"container mx-auto p-8 bg-white rounded-lg shadow-lg",children:[(0,r.jsxs)("h1",{className:"text-4xl font-extrabold text-gray-900 mb-6 text-center",children:[e,"'s Gallery"]}),(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)(g,{onUploadSuccess:n})}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:0===t.length?(0,r.jsx)("p",{className:"text-gray-500 text-center col-span-full",children:"No images uploaded yet. Start by adding some!"}):t.map((e,t)=>(0,r.jsx)("div",{className:"relative overflow-hidden rounded-xl shadow-md transform transition duration-300 hover:scale-105",children:(0,r.jsx)("img",{src:e,alt:"Uploaded",className:"w-full h-56 object-cover rounded-lg",onError:e=>e.currentTarget.src="/placeholder.png"})},t))})]})}},5725:(e,t,a)=>{"use strict";a.d(t,{DY:()=>o,Lx:()=>n,V6:()=>c,oE:()=>i});var r=a(2651);let l="http://localhost:9090/api",s=()=>{let e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}},o=async(e,t)=>(await r.A.post("".concat(l,"/auth/register"),{username:e,password:t})).data,n=async(e,t)=>(await r.A.post("".concat(l,"/auth/login"),{username:e,password:t})).data,i=async()=>(await r.A.get("".concat(l,"/uploads/user-images"),{headers:s()})).data,c=async e=>{let t=new FormData;return t.append("file",e),(await r.A.post("".concat(l,"/uploads/image"),t,{headers:{...s(),"Content-Type":"multipart/form-data"}})).data}}},e=>{var t=t=>e(e.s=t);e.O(0,[238,441,517,358],()=>t(3643)),_N_E=e.O()}]);